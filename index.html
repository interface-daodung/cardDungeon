<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Card Dungeon</title>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- Icon Xu + ƒëi·ªÉm -->
  <div class="score-bar fade-in">
    <span>ü™ô</span>
    <span id="score">0</span>
  </div>

  <!-- Icon setting -->
  <div class="settings-btn-wrapper fade-in">
    <span class="settings-btn">‚öôÔ∏è</span>
  </div>

  <!-- Ti√™u ƒë·ªÅ game -->
  <h1 class="game-title fade-in">Card Dungeon</h1>

    <div class="card-wrapper fade-in">
      <!-- Th·∫ª b√†i x√≤e ra -->
      <div id="cardCharacter" class="card-container">
        <div class="card card-left"></div>
        <div class="card card-center"></div>
        <div class="card card-right"></div>
      </div>
    </div>
    <!-- Menu d∆∞·ªõi -->
  <div class="menu fade-in">
    <a href="cardLibrary.html" data-label="üìö Th∆∞ vi·ªán">
      <img src="resources/item/library.webp" alt="Th∆∞ vi·ªán">
      <span class="tooltip-text">üìö Th∆∞ vi·ªán</span>
    </a>
    <a href="map1.html" data-label="üß≠ Th√°m hi·ªÉm">
      <img src="resources/item/compass.webp" alt="Th√°m hi·ªÉm">
      <span class="tooltip-text">üß≠ Th√°m hi·ªÉm</span>
    </a>
    <a href="equipments.html" data-label="üó°Ô∏è Trang b·ªã">
      <img src="resources/item/chest.webp" alt="Trang b·ªã">
      <span class="tooltip-text">üó°Ô∏è Trang b·ªã</span>
    </a>
  </div>
  
<script>
// H√†m c·∫≠p nh·∫≠t background image cho c√°c th·∫ª card
function updateCardBackgrounds() {
  // L·∫•y nh√¢n v·∫≠t ƒë∆∞·ª£c ch·ªçn t·ª´ localStorage, m·∫∑c ƒë·ªãnh l√† 'eula' n·∫øu kh√¥ng c√≥
  let selectedCharacter = localStorage.getItem('selectedCharacter');
  if (!selectedCharacter) {
    selectedCharacter = 'eula';
  }
  
  // T√¨m v·ªã tr√≠ c·ªßa nh√¢n v·∫≠t ƒë∆∞·ª£c ch·ªçn trong m·∫£ng data
  const currentIndex = data.findIndex(char => char.id === selectedCharacter);
  
  if (currentIndex !== -1) {
    // C·∫≠p nh·∫≠t card-center v·ªõi nh√¢n v·∫≠t ƒë∆∞·ª£c ch·ªçn
    const cardCenter = document.querySelector('.card-center');
    cardCenter.style.backgroundImage = `url('resources/${selectedCharacter}.webp')`;
    
    // T√≠nh to√°n v·ªã tr√≠ c·ªßa 2 th·∫ª li·ªÅn k·ªÅ
    const cardLeftIndex = (currentIndex + 1) % data.length;
    const cardRightIndex = (currentIndex - 1 + data.length) % data.length;
    
    // C·∫≠p nh·∫≠t card-left
    const cardLeft = document.querySelector('.card-right');
    cardLeft.style.backgroundImage = `url('resources/${data[cardLeftIndex].id}.webp')`;
    
    // C·∫≠p nh·∫≠t card-right
    const cardRight = document.querySelector('.card-left');
    cardRight.style.backgroundImage = `url('resources/${data[cardRightIndex].id}.webp')`;
  }
}

document.getElementById("cardCharacter").addEventListener("click", function() {
  window.location.href = "selectCharacter.html"; 
});

// D·ªØ li·ªáu nh√¢n v·∫≠t ƒë∆∞·ª£c t·∫°o b·ªüi AI
const data = [
  {
    "id": "eula",
    "name": "Eula",
    "character": "Eula",
    "hp": 12,
    "elementCoin": 3,
    "storyText": "Eula l√† m·ªôt hi·ªáp sƒ© qu√Ω t·ªôc c·ªßa Mondstadt, thu·ªôc d√≤ng h·ªç Lawrence. C√¥ s·ªü h·ªØu Vision Cryo v√† s·ª≠ d·ª•ng Claymore l√†m v≈© kh√≠. M·∫∑c d√π xu·∫•t th√¢n t·ª´ gia ƒë√¨nh qu√Ω t·ªôc, Eula lu√¥n t√¨m c√°ch chu·ªôc l·ªói cho nh·ªØng t·ªôi √°c m√† t·ªï ti√™n ƒë√£ g√¢y ra. C√¥ l√† m·ªôt v≈© c√¥ng t√†i ba v√† chi·∫øn binh d≈©ng c·∫£m, lu√¥n b·∫£o v·ªá Mondstadt kh·ªèi nh·ªØng m·ªëi ƒëe d·ªça.",
    "effectText": "Khi k√≠ch ho·∫°t, Eula t·∫°o ra m·ªôt v·ª• n·ªï Cryo m·∫°nh m·∫Ω, g√¢y s√°t th∆∞∆°ng l·ªõn cho k·∫ª ƒë·ªãch v√† l√†m ch·∫≠m ch√∫ng. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng tƒÉng s·ª©c m·∫°nh t·∫•n c√¥ng khi HP th·∫•p."
  },
  {
    "id": "nahida",
    "name": "Nahida",
    "character": "Nahida",
    "hp": 10,
    "elementCoin": 4,
    "storyText": "Nahida l√† v·ªã th·∫ßn Dendro c·ªßa Sumeru, c√≤n ƒë∆∞·ª£c g·ªçi l√† Lesser Lord Kusanali. C√¥ l√† m·ªôt v·ªã th·∫ßn tr·∫ª tu·ªïi, th√¥ng minh v√† t√≤ m√≤ v·ªÅ th·∫ø gi·ªõi xung quanh. Nahida c√≥ kh·∫£ nƒÉng ƒë·ªçc suy nghƒ© v√† k√Ω ·ª©c c·ªßa ng∆∞·ªùi kh√°c, ƒë·ªìng th·ªùi c√≥ th·ªÉ t·∫°o ra nh·ªØng gi·∫•c m∆° v√† ·∫£o ·∫£nh. C√¥ lu√¥n t√¨m c√°ch b·∫£o v·ªá Sumeru v√† ng∆∞·ªùi d√¢n c·ªßa m√¨nh.",
    "effectText": "Nahida c√≥ th·ªÉ t·∫°o ra c√°c ph·∫£n ·ª©ng Dendro m·∫°nh m·∫Ω, tƒÉng s√°t th∆∞∆°ng cho ƒë·ªìng ƒë·ªôi v√† l√†m suy y·∫øu k·∫ª ƒë·ªãch. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng ch·ªØa l√†nh v√† tƒÉng s·ª©c m·∫°nh cho nh√≥m."
  },
  {
    "id": "zhongli",
    "name": "Zhongli",
    "character": "Zhongli",
    "hp": 15,
    "elementCoin": 2,
    "storyText": "Zhongli l√† v·ªã th·∫ßn Geo c·ªßa Liyue, c√≤n ƒë∆∞·ª£c g·ªçi l√† Morax. √îng l√† m·ªôt trong nh·ªØng v·ªã th·∫ßn c·ªï x∆∞a nh·∫•t c·ªßa Teyvat, ƒë√£ s·ªëng h√†ng ngh√¨n nƒÉm. Zhongli c√≥ ki·∫øn th·ª©c s√¢u r·ªông v·ªÅ l·ªãch s·ª≠ v√† vƒÉn h√≥a, ƒë·ªìng th·ªùi s·ªü h·ªØu s·ª©c m·∫°nh Geo kh·ªïng l·ªì. √îng lu√¥n b·∫£o v·ªá Liyue v√† ng∆∞·ªùi d√¢n c·ªßa m√¨nh, m·∫∑c d√π ƒë√¥i khi ph·∫£i hy sinh b·∫£n th√¢n.",
    "effectText": "Zhongli t·∫°o ra m·ªôt l√° ch·∫Øn Geo m·∫°nh m·∫Ω, b·∫£o v·ªá ƒë·ªìng ƒë·ªôi kh·ªèi s√°t th∆∞∆°ng. √îng c≈©ng c√≥ th·ªÉ g√¢y s√°t th∆∞∆°ng l·ªõn v·ªõi c√°c k·ªπ nƒÉng Geo v√† l√†m ch·∫≠m k·∫ª ƒë·ªãch."
  },
  {
    "id": "venti",
    "name": "Venti",
    "character": "Venti",
    "hp": 9,
    "elementCoin": 5,
    "storyText": "Venti l√† v·ªã th·∫ßn Anemo c·ªßa Mondstadt, c√≤n ƒë∆∞·ª£c g·ªçi l√† Barbatos. √îng l√† m·ªôt v·ªã th·∫ßn t·ª± do, y√™u th√≠ch r∆∞·ª£u v√† √¢m nh·∫°c. Venti c√≥ kh·∫£ nƒÉng bay l∆∞·ª£n v√† ƒëi·ªÅu khi·ªÉn gi√≥, ƒë·ªìng th·ªùi c√≥ th·ªÉ t·∫°o ra nh·ªØng giai ƒëi·ªáu ma thu·∫≠t. M·∫∑c d√π ƒë√¥i khi l∆∞·ªùi bi·∫øng, √¥ng lu√¥n b·∫£o v·ªá Mondstadt v√† ng∆∞·ªùi d√¢n c·ªßa m√¨nh.",
    "effectText": "Venti c√≥ th·ªÉ t·∫°o ra c√°c c∆°n gi√≥ m·∫°nh, ƒë·∫©y k·∫ª ƒë·ªãch ra xa v√† tƒÉng t·ªëc ƒë·ªô di chuy·ªÉn cho ƒë·ªìng ƒë·ªôi. √îng c≈©ng c√≥ kh·∫£ nƒÉng t·∫°o ra c√°c ph·∫£n ·ª©ng Anemo m·∫°nh m·∫Ω."
  },
  {
    "id": "raiden",
    "name": "Raiden",
    "character": "Raiden",
    "hp": 14,
    "elementCoin": 3,
    "storyText": "Raiden Shogun l√† v·ªã th·∫ßn Electro c·ªßa Inazuma, c√≤n ƒë∆∞·ª£c g·ªçi l√† Ei. C√¥ l√† m·ªôt v·ªã th·∫ßn m·∫°nh m·∫Ω v√† nghi√™m kh·∫Øc, lu√¥n t√¨m c√°ch b·∫£o v·ªá Inazuma kh·ªèi nh·ªØng m·ªëi ƒëe d·ªça. Raiden s·ªü h·ªØu s·ª©c m·∫°nh Electro kh·ªïng l·ªì v√† c√≥ th·ªÉ t·∫°o ra nh·ªØng c∆°n b√£o ƒëi·ªán. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng ƒëi·ªÅu khi·ªÉn th·ªùi gian v√† kh√¥ng gian.",
    "effectText": "Raiden c√≥ th·ªÉ t·∫°o ra c√°c c∆°n b√£o ƒëi·ªán m·∫°nh m·∫Ω, g√¢y s√°t th∆∞∆°ng l·ªõn cho k·∫ª ƒë·ªãch. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng tƒÉng s·ª©c m·∫°nh t·∫•n c√¥ng cho ƒë·ªìng ƒë·ªôi v√† l√†m ch·∫≠m k·∫ª ƒë·ªãch."
  },
  {
    "id": "mavuika",
    "name": "Mavuika",
    "character": "Mavuika",
    "hp": 13,
    "elementCoin": 4,
    "storyText": "Mavuika l√† m·ªôt nh√¢n v·∫≠t b√≠ ·∫©n v·ªõi s·ª©c m·∫°nh Pyro ƒë√°ng s·ª£. C√¥ c√≥ kh·∫£ nƒÉng ƒëi·ªÅu khi·ªÉn l·ª≠a v√† t·∫°o ra nh·ªØng v·ª• n·ªï nhi·ªát m·∫°nh m·∫Ω. Mavuika lu√¥n t√¨m c√°ch th·ª≠ th√°ch nh·ªØng ƒë·ªëi th·ªß m·∫°nh m·∫Ω v√† kh√¥ng ng·∫°i s·ª≠ d·ª•ng s·ª©c m·∫°nh c·ªßa m√¨nh ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u. C√¥ l√† m·ªôt chi·∫øn binh d≈©ng c·∫£m v√† ki√™n c∆∞·ªùng.",
    "effectText": "Mavuika c√≥ th·ªÉ t·∫°o ra c√°c v·ª• n·ªï Pyro m·∫°nh m·∫Ω, g√¢y s√°t th∆∞∆°ng l·ªõn cho k·∫ª ƒë·ªãch. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng tƒÉng s·ª©c m·∫°nh t·∫•n c√¥ng khi HP th·∫•p v√† t·∫°o ra c√°c ph·∫£n ·ª©ng Pyro m·∫°nh m·∫Ω."
  },
  {
    "id": "furina",
    "name": "Furina",
    "character": "Furina",
    "hp": 11,
    "elementCoin": 4,
    "storyText": "Furina l√† m·ªôt nh√¢n v·∫≠t Hydro v·ªõi s·ª©c m·∫°nh ƒëi·ªÅu khi·ªÉn n∆∞·ªõc ƒë√°ng kinh ng·∫°c. C√¥ c√≥ th·ªÉ t·∫°o ra nh·ªØng c∆°n s√≥ng m·∫°nh m·∫Ω v√† ƒëi·ªÅu khi·ªÉn d√≤ng ch·∫£y c·ªßa n∆∞·ªõc. Furina lu√¥n t√¨m c√°ch b·∫£o v·ªá nh·ªØng ng∆∞·ªùi y·∫øu th·∫ø v√† s·ª≠ d·ª•ng s·ª©c m·∫°nh c·ªßa m√¨nh ƒë·ªÉ l√†m ƒëi·ªÅu thi·ªán. C√¥ l√† m·ªôt nh√¢n v·∫≠t th√¥ng minh v√† nh√¢n t·ª´.",
    "effectText": "Furina c√≥ th·ªÉ t·∫°o ra c√°c c∆°n s√≥ng Hydro m·∫°nh m·∫Ω, ƒë·∫©y k·∫ª ƒë·ªãch ra xa v√† l√†m ch·∫≠m ch√∫ng. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng ch·ªØa l√†nh ƒë·ªìng ƒë·ªôi v√† t·∫°o ra c√°c ph·∫£n ·ª©ng Hydro m·∫°nh m·∫Ω."
  }
];

// H√†m c·∫≠p nh·∫≠t score t·ª´ localStorage
function updateScoreDisplay() {
  try {
    // L·∫•y gi√° tr·ªã coinScoreGameTotal t·ª´ localStorage
    const coinScoreTotal = localStorage.getItem('coinScoreGameTotal');
    const scoreValue = coinScoreTotal ? parseInt(coinScoreTotal) : 0;
    
    // C·∫≠p nh·∫≠t hi·ªÉn th·ªã score
    const scoreElement = document.getElementById('score');
    if (scoreElement) {
      scoreElement.textContent = scoreValue.toLocaleString(); // Format s·ªë v·ªõi d·∫•u ph·∫©y
    }
  } catch (error) {
    console.error('L·ªói khi c·∫≠p nh·∫≠t score display:', error);
  }
}

// G·ªçi h√†m c·∫≠p nh·∫≠t background v√† score khi trang load
document.addEventListener('DOMContentLoaded', function() {
  updateCardBackgrounds();
  updateScoreDisplay();
});
</script>


</body>
</html>
