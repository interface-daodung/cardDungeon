<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Card Stack Demo</title>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Icon Xu + ƒëi·ªÉm -->
  <div class="score-bar fade-in">
    <span>ü™ô</span>
    <span id="score">0</span>
  </div>

  <!-- Icon setting -->
  <div class="settings-btn-wrapper fade-in">
    <span class="settings-btn">‚öôÔ∏è</span>
  </div>

  <div class="main-wrapper">
    <div class="side left-side">
      <!-- N·ªôi dung b√™n tr√°i -->
      <div style="color: #00c1ff;" class="name-side" id="characterName">Eula</div>
      <p style="color:black;" id="characterStory"></p>
    </div>
    <h2 class="section-title">Nh√¢n V·∫≠t</h2>
  <div class="center-area">
    
      <div class="card-container">
      
        <button class="nav prev">&#9664;</button>
        <button class="nav next">&#9654;</button>

        <!-- C√°c th·∫ª card s·∫Ω ƒë∆∞·ª£c t·∫°o ƒë·ªông t·ª´ JavaScript -->
      </div>

    
    </div>
    <div class="back-btn" onclick="selectCharacter()">Ch·ªçn nh√¢n v·∫≠t</div>
    <div class="side right-side">
          <div><strong>HP:</strong><span class="hp-text" id="characterHP">12/12</span> <span class="update-text">n√¢ng c·∫•p</span></div>
          <div><strong>Element Coin:</strong><span class="element-coin-text" id="characterElementCoin">0</span></div>
          <div><strong>Effect:</strong><span class="effect-text" id="characterEffect">ƒëang c·∫≠p nh·∫≠t</span></div>
  </div>
    </div>
  </div>

  <script>

const container = document.querySelector('.card-container');
const cards = Array.from(container.querySelectorAll('.card'));
const btnPrev = container.querySelector('.prev');
const btnNext = container.querySelector('.next');

let currentIndex = 0;

// D·ªØ li·ªáu nh√¢n v·∫≠t ƒë∆∞·ª£c t·∫°o b·ªüi AI
const data = [
  {
    "id": "eula",
    "name": "Eula",
    "character": "Eula",
    "hp": 12,
    "elementCoin": 3,
    "storyText": "Eula l√† m·ªôt hi·ªáp sƒ© qu√Ω t·ªôc c·ªßa Mondstadt, thu·ªôc d√≤ng h·ªç Lawrence. C√¥ s·ªü h·ªØu Vision Cryo v√† s·ª≠ d·ª•ng Claymore l√†m v≈© kh√≠. M·∫∑c d√π xu·∫•t th√¢n t·ª´ gia ƒë√¨nh qu√Ω t·ªôc, Eula lu√¥n t√¨m c√°ch chu·ªôc l·ªói cho nh·ªØng t·ªôi √°c m√† t·ªï ti√™n ƒë√£ g√¢y ra. C√¥ l√† m·ªôt v≈© c√¥ng t√†i ba v√† chi·∫øn binh d≈©ng c·∫£m, lu√¥n b·∫£o v·ªá Mondstadt kh·ªèi nh·ªØng m·ªëi ƒëe d·ªça.",
    "effectText": "Khi k√≠ch ho·∫°t, Eula t·∫°o ra m·ªôt v·ª• n·ªï Cryo m·∫°nh m·∫Ω, g√¢y s√°t th∆∞∆°ng l·ªõn cho k·∫ª ƒë·ªãch v√† l√†m ch·∫≠m ch√∫ng. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng tƒÉng s·ª©c m·∫°nh t·∫•n c√¥ng khi HP th·∫•p."
  },
  {
    "id": "nahida",
    "name": "Nahida",
    "character": "Nahida",
    "hp": 10,
    "elementCoin": 4,
    "storyText": "Nahida l√† v·ªã th·∫ßn Dendro c·ªßa Sumeru, c√≤n ƒë∆∞·ª£c g·ªçi l√† Lesser Lord Kusanali. C√¥ l√† m·ªôt v·ªã th·∫ßn tr·∫ª tu·ªïi, th√¥ng minh v√† t√≤ m√≤ v·ªÅ th·∫ø gi·ªõi xung quanh. Nahida c√≥ kh·∫£ nƒÉng ƒë·ªçc suy nghƒ© v√† k√Ω ·ª©c c·ªßa ng∆∞·ªùi kh√°c, ƒë·ªìng th·ªùi c√≥ th·ªÉ t·∫°o ra nh·ªØng gi·∫•c m∆° v√† ·∫£o ·∫£nh. C√¥ lu√¥n t√¨m c√°ch b·∫£o v·ªá Sumeru v√† ng∆∞·ªùi d√¢n c·ªßa m√¨nh.",
    "effectText": "Nahida c√≥ th·ªÉ t·∫°o ra c√°c ph·∫£n ·ª©ng Dendro m·∫°nh m·∫Ω, tƒÉng s√°t th∆∞∆°ng cho ƒë·ªìng ƒë·ªôi v√† l√†m suy y·∫øu k·∫ª ƒë·ªãch. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng ch·ªØa l√†nh v√† tƒÉng s·ª©c m·∫°nh cho nh√≥m."
  },
  {
    "id": "zhongli",
    "name": "Zhongli",
    "character": "Zhongli",
    "hp": 15,
    "elementCoin": 2,
    "storyText": "Zhongli l√† v·ªã th·∫ßn Geo c·ªßa Liyue, c√≤n ƒë∆∞·ª£c g·ªçi l√† Morax. √îng l√† m·ªôt trong nh·ªØng v·ªã th·∫ßn c·ªï x∆∞a nh·∫•t c·ªßa Teyvat, ƒë√£ s·ªëng h√†ng ngh√¨n nƒÉm. Zhongli c√≥ ki·∫øn th·ª©c s√¢u r·ªông v·ªÅ l·ªãch s·ª≠ v√† vƒÉn h√≥a, ƒë·ªìng th·ªùi s·ªü h·ªØu s·ª©c m·∫°nh Geo kh·ªïng l·ªì. √îng lu√¥n b·∫£o v·ªá Liyue v√† ng∆∞·ªùi d√¢n c·ªßa m√¨nh, m·∫∑c d√π ƒë√¥i khi ph·∫£i hy sinh b·∫£n th√¢n.",
    "effectText": "Zhongli t·∫°o ra m·ªôt l√° ch·∫Øn Geo m·∫°nh m·∫Ω, b·∫£o v·ªá ƒë·ªìng ƒë·ªôi kh·ªèi s√°t th∆∞∆°ng. √îng c≈©ng c√≥ th·ªÉ g√¢y s√°t th∆∞∆°ng l·ªõn v·ªõi c√°c k·ªπ nƒÉng Geo v√† l√†m ch·∫≠m k·∫ª ƒë·ªãch."
  },
  {
    "id": "venti",
    "name": "Venti",
    "character": "Venti",
    "hp": 9,
    "elementCoin": 5,
    "storyText": "Venti l√† v·ªã th·∫ßn Anemo c·ªßa Mondstadt, c√≤n ƒë∆∞·ª£c g·ªçi l√† Barbatos. √îng l√† m·ªôt v·ªã th·∫ßn t·ª± do, y√™u th√≠ch r∆∞·ª£u v√† √¢m nh·∫°c. Venti c√≥ kh·∫£ nƒÉng bay l∆∞·ª£n v√† ƒëi·ªÅu khi·ªÉn gi√≥, ƒë·ªìng th·ªùi c√≥ th·ªÉ t·∫°o ra nh·ªØng giai ƒëi·ªáu ma thu·∫≠t. M·∫∑c d√π ƒë√¥i khi l∆∞·ªùi bi·∫øng, √¥ng lu√¥n b·∫£o v·ªá Mondstadt v√† ng∆∞·ªùi d√¢n c·ªßa m√¨nh.",
    "effectText": "Venti c√≥ th·ªÉ t·∫°o ra c√°c c∆°n gi√≥ m·∫°nh, ƒë·∫©y k·∫ª ƒë·ªãch ra xa v√† tƒÉng t·ªëc ƒë·ªô di chuy·ªÉn cho ƒë·ªìng ƒë·ªôi. √îng c≈©ng c√≥ kh·∫£ nƒÉng t·∫°o ra c√°c ph·∫£n ·ª©ng Anemo m·∫°nh m·∫Ω."
  },
  {
    "id": "raiden",
    "name": "Raiden",
    "character": "Raiden",
    "hp": 14,
    "elementCoin": 3,
    "storyText": "Raiden Shogun l√† v·ªã th·∫ßn Electro c·ªßa Inazuma, c√≤n ƒë∆∞·ª£c g·ªçi l√† Ei. C√¥ l√† m·ªôt v·ªã th·∫ßn m·∫°nh m·∫Ω v√† nghi√™m kh·∫Øc, lu√¥n t√¨m c√°ch b·∫£o v·ªá Inazuma kh·ªèi nh·ªØng m·ªëi ƒëe d·ªça. Raiden s·ªü h·ªØu s·ª©c m·∫°nh Electro kh·ªïng l·ªì v√† c√≥ th·ªÉ t·∫°o ra nh·ªØng c∆°n b√£o ƒëi·ªán. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng ƒëi·ªÅu khi·ªÉn th·ªùi gian v√† kh√¥ng gian.",
    "effectText": "Raiden c√≥ th·ªÉ t·∫°o ra c√°c c∆°n b√£o ƒëi·ªán m·∫°nh m·∫Ω, g√¢y s√°t th∆∞∆°ng l·ªõn cho k·∫ª ƒë·ªãch. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng tƒÉng s·ª©c m·∫°nh t·∫•n c√¥ng cho ƒë·ªìng ƒë·ªôi v√† l√†m ch·∫≠m k·∫ª ƒë·ªãch."
  },
  {
    "id": "mavuika",
    "name": "Mavuika",
    "character": "Mavuika",
    "hp": 13,
    "elementCoin": 4,
    "storyText": "Mavuika l√† m·ªôt nh√¢n v·∫≠t b√≠ ·∫©n v·ªõi s·ª©c m·∫°nh Pyro ƒë√°ng s·ª£. C√¥ c√≥ kh·∫£ nƒÉng ƒëi·ªÅu khi·ªÉn l·ª≠a v√† t·∫°o ra nh·ªØng v·ª• n·ªï nhi·ªát m·∫°nh m·∫Ω. Mavuika lu√¥n t√¨m c√°ch th·ª≠ th√°ch nh·ªØng ƒë·ªëi th·ªß m·∫°nh m·∫Ω v√† kh√¥ng ng·∫°i s·ª≠ d·ª•ng s·ª©c m·∫°nh c·ªßa m√¨nh ƒë·ªÉ ƒë·∫°t ƒë∆∞·ª£c m·ª•c ti√™u. C√¥ l√† m·ªôt chi·∫øn binh d≈©ng c·∫£m v√† ki√™n c∆∞·ªùng.",
    "effectText": "Mavuika c√≥ th·ªÉ t·∫°o ra c√°c v·ª• n·ªï Pyro m·∫°nh m·∫Ω, g√¢y s√°t th∆∞∆°ng l·ªõn cho k·∫ª ƒë·ªãch. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng tƒÉng s·ª©c m·∫°nh t·∫•n c√¥ng khi HP th·∫•p v√† t·∫°o ra c√°c ph·∫£n ·ª©ng Pyro m·∫°nh m·∫Ω."
  },
  {
    "id": "furina",
    "name": "Furina",
    "character": "Furina",
    "hp": 11,
    "elementCoin": 4,
    "storyText": "Furina l√† m·ªôt nh√¢n v·∫≠t Hydro v·ªõi s·ª©c m·∫°nh ƒëi·ªÅu khi·ªÉn n∆∞·ªõc ƒë√°ng kinh ng·∫°c. C√¥ c√≥ th·ªÉ t·∫°o ra nh·ªØng c∆°n s√≥ng m·∫°nh m·∫Ω v√† ƒëi·ªÅu khi·ªÉn d√≤ng ch·∫£y c·ªßa n∆∞·ªõc. Furina lu√¥n t√¨m c√°ch b·∫£o v·ªá nh·ªØng ng∆∞·ªùi y·∫øu th·∫ø v√† s·ª≠ d·ª•ng s·ª©c m·∫°nh c·ªßa m√¨nh ƒë·ªÉ l√†m ƒëi·ªÅu thi·ªán. C√¥ l√† m·ªôt nh√¢n v·∫≠t th√¥ng minh v√† nh√¢n t·ª´.",
    "effectText": "Furina c√≥ th·ªÉ t·∫°o ra c√°c c∆°n s√≥ng Hydro m·∫°nh m·∫Ω, ƒë·∫©y k·∫ª ƒë·ªãch ra xa v√† l√†m ch·∫≠m ch√∫ng. C√¥ c≈©ng c√≥ kh·∫£ nƒÉng ch·ªØa l√†nh ƒë·ªìng ƒë·ªôi v√† t·∫°o ra c√°c ph·∫£n ·ª©ng Hydro m·∫°nh m·∫Ω."
  }
];



// S·∫Øp x·∫øp c√°c th·∫ª ban ƒë·∫ßu
function renderCards() {
  window.cards.forEach((card, i) => {
    let pos = (i - currentIndex + window.cards.length) % window.cards.length;
    if (pos === 0) {
      // Th·∫ª hi·ªán t·∫°i
      card.style.zIndex = window.cards.length;
      card.style.transform = `translateX(0) scale(1) rotateY(0deg)`;
      card.style.opacity = 1;
    } else if (pos === 1) {
      // Th·∫ª ti·∫øp theo b√™n ph·∫£i
      card.style.zIndex = window.cards.length - 1;
      card.style.transform = `translateX(60px) scale(0.9) rotateY(-10deg)`;
      card.style.opacity = 0.9;
    } else if (pos === window.cards.length - 1) {
      // Th·∫ª tr∆∞·ªõc b√™n tr√°i
      card.style.zIndex = window.cards.length - 1;
      card.style.transform = `translateX(-60px) scale(0.86) rotateY(10deg)`;
      card.style.opacity = 0.9;
    } else {
      // Th·∫ª ·ªü xa
      card.style.zIndex = 1;
      card.style.transform = `translateX(0) scale(0.8) rotateY(0deg)`;
      card.style.opacity = 0;
    }
  });
  
  // C·∫≠p nh·∫≠t th√¥ng tin nh√¢n v·∫≠t hi·ªán t·∫°i
  updateCharacterInfo();
}

// C·∫≠p nh·∫≠t th√¥ng tin nh√¢n v·∫≠t
function updateCharacterInfo() {
  const characterData = data[currentIndex];
  
  if (characterData) {
    // C·∫≠p nh·∫≠t t√™n nh√¢n v·∫≠t
    document.getElementById('characterName').textContent = characterData.name;
    
    // C·∫≠p nh·∫≠t c√¢u chuy·ªán
    document.getElementById('characterStory').textContent = characterData.storyText;
    
    // C·∫≠p nh·∫≠t HP
    document.getElementById('characterHP').textContent = `${characterData.hp}/${characterData.hp}`;
    
    // C·∫≠p nh·∫≠t Element Coin
    document.getElementById('characterElementCoin').textContent = characterData.elementCoin;
    
    // C·∫≠p nh·∫≠t Effect
    document.getElementById('characterEffect').textContent = characterData.effectText;
  }
}

// Chuy·ªÉn sang th·∫ª ti·∫øp theo
function nextCard() {
  currentIndex = (currentIndex + 1) % window.cards.length;
  renderCards();
}

// Chuy·ªÉn v·ªÅ th·∫ª tr∆∞·ªõc
function prevCard() {
  currentIndex = (currentIndex - 1 + window.cards.length) % window.cards.length;
  renderCards();
}

// B·∫•m v√†o th·∫ª ƒë·∫±ng sau ƒë·ªÉ xem
cards.forEach((card, i) => {
  card.addEventListener('click', () => {
    let pos = (i - currentIndex + cards.length) % cards.length;
    if (pos === 1) {
      nextCard();
    } else if (pos === cards.length - 1) {
      prevCard();
    }
  });
});

btnNext.addEventListener('click', nextCard);
btnPrev.addEventListener('click', prevCard);

// H√†m ch·ªçn nh√¢n v·∫≠t v√† l∆∞u v√†o localStorage
function selectCharacter() {
  const characterData = data[currentIndex];
  
  if (characterData) {
    // L∆∞u th√¥ng tin nh√¢n v·∫≠t ƒë∆∞·ª£c ch·ªçn v√†o localStorage
    localStorage.setItem('selectedCharacter', characterData.id);
    
    // Chuy·ªÉn v·ªÅ trang index.html
    window.location.href = 'index.html';
  }
}

// H√†m t·∫°o c√°c th·∫ª card ƒë·ªông t·ª´ m·∫£ng data
function createCards() {
  const cardContainer = document.querySelector('.card-container');
  
  // T·∫°o c√°c th·∫ª card t·ª´ m·∫£ng data
  data.forEach((character, index) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.setAttribute('data-character', character.id);
    card.style.backgroundImage = `url('resources/${character.id}.webp')`;
    
    // Th√™m event listener cho m·ªói th·∫ª
    card.addEventListener('click', () => {
      let pos = (index - currentIndex + data.length) % data.length;
      if (pos === 1) {
        nextCard();
      } else if (pos === data.length - 1) {
        prevCard();
      }
    });
    
    cardContainer.appendChild(card);
  });
  
  // C·∫≠p nh·∫≠t bi·∫øn cards sau khi t·∫°o xong
  window.cards = Array.from(cardContainer.querySelectorAll('.card'));
}

// H√†m kh·ªüi t·∫°o trang
function initializePage() {
  // Ki·ªÉm tra selectedCharacter t·ª´ localStorage
  let selectedCharacter = localStorage.getItem('selectedCharacter');
  
  if (selectedCharacter) {
    // T√¨m v·ªã tr√≠ c·ªßa nh√¢n v·∫≠t ƒë∆∞·ª£c ch·ªçn trong m·∫£ng data
    const selectedIndex = data.findIndex(char => char.id === selectedCharacter);
    if (selectedIndex !== -1) {
      currentIndex = selectedIndex;
    } else {
      // N·∫øu kh√¥ng t√¨m th·∫•y, m·∫∑c ƒë·ªãnh l√† eula
      currentIndex = 0;
      localStorage.setItem('selectedCharacter', 'eula');
    }
  } else {
    // N·∫øu kh√¥ng c√≥ selectedCharacter, m·∫∑c ƒë·ªãnh l√† eula
    currentIndex = 0;
    localStorage.setItem('selectedCharacter', 'eula');
  }
  
  // T·∫°o c√°c th·∫ª card
  createCards();
  
  // Render c√°c th·∫ª card
  renderCards();
}

// H√†m c·∫≠p nh·∫≠t score t·ª´ localStorage
function updateScoreDisplay() {
  try {
    // L·∫•y gi√° tr·ªã coinScoreGameTotal t·ª´ localStorage
    const coinScoreTotal = localStorage.getItem('coinScoreGameTotal');
    const scoreValue = coinScoreTotal ? parseInt(coinScoreTotal) : 0;
    
    // C·∫≠p nh·∫≠t hi·ªÉn th·ªã score
    const scoreElement = document.getElementById('score');
    if (scoreElement) {
      scoreElement.textContent = scoreValue.toLocaleString(); // Format s·ªë v·ªõi d·∫•u ph·∫©y
    }
  } catch (error) {
    console.error('L·ªói khi c·∫≠p nh·∫≠t score display:', error);
  }
}

// Kh·ªüi t·∫°o ban ƒë·∫ßu khi DOM ready
document.addEventListener('DOMContentLoaded', function() {
  initializePage();
  updateScoreDisplay(); // C·∫≠p nh·∫≠t score khi trang load
});
</script>

</body>
</html>
